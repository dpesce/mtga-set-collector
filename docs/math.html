<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Math — MTGA Collection Strategy</title>
  <link rel="stylesheet" href="assets/css/style.css" />

  <!-- MathJax config -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      },
      svg: { fontCache: 'global' }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>
<body>
  <div class="container">
    <nav class="nav">
      <div class="brand">MTGA Collection Strategy</div>
      <a data-nav href="index.html">Home</a>
      <a data-nav href="math.html">The Math</a>
      <a data-nav href="calculator.html">Calculator</a>
    </nav>

    <div class="card">
      <h1>The Math</h1>
      <p>
        This page explains the model, assumptions, and equations used by the calculator.
      </p>
    </div>

    <div class="card">
      <h2>Preliminaries</h2>

      <p>Suppose the set we would like to collect contains $N$ cards, and an individual pack contains $n \leq N$ cards.  There are a few related, but distinct, questions that we would like to answer:</p>

      <ul>
        <li>How many packs must we open to collect at least one copy of every card in the set?</li>
        <li>What is the probability that we will have collected all of the cards in the set after opening a certain number of packs?</li>
        <li>How many distinct cards can we expect to have collected after opening some number of booster packs?</li>
      </ul>

      <p>We assume that a pack does not contain any duplicate cards, such that there are ${N \choose n}$ options for the distinct set of cards contained within a single pack.  If we open $t$ packs, then the number of possible sequences of packs is</p>

      <p>
        $$\text{Number of possible sequences after opening $t$ packs} = {N \choose n}^t .$$
      </p>

      <!-- <aside class="example">
        <h3>Example</h3>
        <p>
          As a simple concrete example, let's consider the case of $N=4$ and $n=2$.  We can label the four individual cards in the set as A, B, C, D.  There are then ${4 \choose 2} = 6$ possible two-card packs: AB, AC, AD, BC, BD, CD.  A possible sequence of three packs might then look like {AC, BD, AB}; since there are $6$ possibilities for the contents of each pack, there are $6^3$ possibilities for this sequence of three packs.
        </p>
      </aside> -->
    </div>

    <div class="card">

      <h2>How many packs does it take to collect all cards in the set?</h2>

      <p>For determining the probability of having collected all of the cards after opening $t$ packs, it is useful to first consider the probability that we have <i>missed</i> a card after opening $t$ packs.</p>

      <p>Let's denote the probability of missing a particular card $i$ after $t$ packs as $P_t(M_i)$.  When opening a single pack, there are ${N-1 \choose n}$ possible ways -- out of the ${N \choose n}$ different possible pack variants -- in which card $i$ could be missing.  The probability $P_1(M_i)$ of missing this card when opening a single pack is thus</p>

      <p>$$P_1(M_i) = \frac{{N-1 \choose n}}{{N \choose n}} ,$$</p>

      <p>and the probability of missing the card in all of $t$ packs is then</p>

      <p>$$P_t(M_i) = \left( \frac{{N-1 \choose n}}{{N \choose n}} \right)^t .$$</p>

      <p>This kind of stacked binomial coefficient will appear often in our calculations, so we'll give it its own special notation,</p>

      <p>$$q_k \equiv \frac{{N-k \choose n}}{{N \choose n}} .$$</p>

      <p>The quantity $q_k$ captures the probability that $k$ cards are missing from a single pack.</p>

      <!-- <aside class="example">
        <h3>Example</h3>
        <p>
          For our example case of $N=4$ and $n=2$, let's consider the probability of missing card A.  Out of the six possible two-card packs, three of them do not contain A.  The probability of missing card A in a single pack is thus $P(M_A) = {3 \choose 2} / {4 \choose 2} = 3/6 = 0.5$.  And the probability of missing this same card for $t$ packs in a row is then simply $(0.5)^t$.
        </p>
      </aside> -->

      <p>There are $N$ individual cards, so the probability of missing any one of them -- i.e., not just the probability of missing a particular card $i$, but the probability of missing any one of the $N$ individual cards -- is <i>almost</i> going to be $N$ times the probability of missing a single one,</p>

      <p>$$P_t(M_1 \cup M_2 \cup \ldots \cup M_N) \approx N q_1^t .$$</p>

      <p>However, the above expression actually overcounts the probability, because we have included multiple instances of situations where two cards are simultaneously missing.  There are ${N \choose 2}$ distinct pairs of cards, and the probability of missing a pair of cards after $t$ packs is $q_2^t$.  So we can correct for the overcounting of these missing pairs by subtracting one instance of $q_2^t$ for each of the ${N \choose 2}$ pairs of cards,</p>

      <p>$$P_t(M_1 \cup M_2 \cup \ldots \cup M_N) \approx N q_1^t - {N \choose 2} q_2^t .$$</p>

      <p>However, we are still miscounting the probability, because some of the instances in which pairs of cards are missing will also be missing a third card, and so the cases of missing triples have now been oversubtracted and will need to be added back in,</p>

      <p>$$P_t(M_1 \cup M_2 \cup \ldots \cup M_N) \approx N q_1^t - {N \choose 2} q_2^t + {N \choose 3} q_3^t .$$</p>

      <p>And then similarly for the groups of $4$ cards, $5$ cards, etc., all the way on up to $N-1$ cards.  Each time the new term will enter in with a sign that is opposite that of the previous term, because it is really a (subtractive) correction to the previous term.  We thus end up with</p>

      <p>$$
        \begin{align}
          P_t(M_1 \cup M_2 \cup \ldots \cup M_N) & = N q_1^t - {N \choose 2} q_2^t + {N \choose 3} q_3^t - {N \choose 4} q_4^t + \ldots \\
          & = \sum_{k=1}^N (-1)^{k+1} {N \choose k} q_k^t .
        \end{align}
      $$</p>

      <p>The probability that we are <i>not</i> missing any cards is then simply the complement of the above expression,</p>

      <p>$$
        \begin{align}
          \neg P_t(M_1 \cup M_2 \cup \ldots \cup M_N) & = 1 - \sum_{k=1}^N (-1)^{k+1} {N \choose k} q_k^t \\
          & = \sum_{k=0}^N (-1)^{k} {N \choose k} q_k^t .
        \end{align}
      $$</p>

      <p>Denoting as $F_t(n,N)$ the probability of having collected all $N$ cards in the set after opening $t$ packs each containing $n$ cards, we thus have the result</p>

      <p>$$F_t(n,N) = \sum_{k=0}^N (-1)^{k} {N \choose k} q_k^t .$$</p>

      <p>This expression represents a generalization of the well-known <a href="https://en.wikipedia.org/wiki/Coupon_collector%27s_problem">coupon collector's problem</a>, which our result reduces to for the case of $n=1$.  An interactive plot of $F_t(n,N)$ is shown below.</p>

    </div>

    <div class="card math-widget">
      <h2>Interactive visualization</h2>
      <p class="muted">The plots below show:</p>
      <ul>
        <li class="muted">[Top] $F_t(n,N)$ as a function of $t$.  This quantity represents the probability to have collected all $N$ cards in the set after having opened $t$ packs containing $n$ cards each.</li>
        <li class="muted">[Bottom] $P_t(n,N)$ as a function of $t$.  This quantity represents the probability that it will require opening exactly $t$ packs containing $n$ cards each to have collected all $N$ cards in the set.</li>
      </ul>
      <p class="muted">Use the sliders to change $N$ (set size) and $n$ (cards per pack).</p>

      <div class="ft-controls">
        <div>
          <label for="ftN">Set size, $N$ = <span id="ftNVal"></span></label>
          <input id="ftN" type="range" min="2" max="300" step="1" value="100">
        </div>

        <div>
          <label for="ftn">Cards per pack, $n$ = <span id="ftnVal"></span></label>
          <input id="ftn" type="range" min="1" max="100" step="1" value="8">
        </div>
      </div>

      <div id="ftPlot" class="ft-plot"></div>
      <div id="ptPlot" class="ft-plot" style="margin-top: 12px;"></div>

      <small class="muted">
        Notes: $n$ is automatically capped at $N$. Large $N$ can be slower to compute.
      </small>

    </div>

    <div class="card">

      <h2>How likely are we to have collected all cards after opening some number of packs?</h2>

      <p>Those familiar with probability distributions may recognize from the plot above that $F_t(n,N)$ is behaving like a <a href="https://en.wikipedia.org/wiki/Cumulative_distribution_function">cumulative distribution function</a> (CDF).  And a CDF is expected given how we constructed $F_t(n,N)$, which intends for it to capture the probability that we have collected all cards in the set after opening $t$ packs; i.e., $F_t(n,N)$ should be a monotonically increasing function of $t$ that asymptotes to 100% probability as $t \rightarrow \infty$.</p>

      <p>Given the functional form of $F_t(n,N)$, we can readily determine the median and other quantiles by finding the value of $t$ at which $F_t(n,N)$ is equal to some desired probability.  For example:</p>

      <div class="math-table-wrap">
        <table class="math-table">
          <thead>
            <tr>
              <th>Quantile</th>
              <th>$(N=100$, $n=8)$</th>
              <th>$(N=250$, $n=15)$</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>0.1%</td><td>33.7</td><td>59.1</td></tr>
            <tr><td>1%</td><td>38.1</td><td>65.3</td></tr>
            <tr><td>5%</td><td>42.9</td><td>72.0</td></tr>
            <tr><td>10%</td><td>45.9</td><td>76.2</td></tr>
            <tr><td>25%</td><td>51.8</td><td>84.2</td></tr>
            <tr><td>50% (median)</td><td>59.9</td><td>95.3</td></tr>
            <tr><td>75%</td><td>70.3</td><td>109.4</td></tr>
            <tr><td>90%</td><td>82.3</td><td>125.6</td></tr>
            <tr><td>95%</td><td>90.9</td><td>137.3</td></tr>
            <tr><td>99%</td><td>110.4</td><td>163.6</td></tr>
            <tr><td>99.9%</td><td>138.1</td><td>200.9</td></tr>
          </tbody>
        </table>
      </div>

      <p>So for $N=100$ and $n=8$, the median number of packs required to collect all cards is ${\sim}60$, but there is a 1% chance to have collected all cards after opening only ${\sim}38$ packs and a 1% chance that collecting all cards will require opening ${\sim}110$ packs.</p>

      <p>However, what if we are interested in the average number of packs?  $F_t(n,N)$ itself is not as directly useful in this case, but we can still use it to derive the relevant expression.  The key is to determine the probability distribution function (PDF) associated with the CDF described by $F_t(n,N)$.  For continuous distributions, the PDF is given by the derivative of the CDF; for discrete distributions, we instead use a finite difference,</p>

      <p>$$
        \begin{align}
          P_t(n,N) & = F_t(n,N) - F_{t-1}(n,N) \\
          & = \sum_{k=0}^{N} (-1)^k {N \choose k} \left( q_k^t - q_k^{t-1} \right) .
        \end{align}
      $$</p>

      <p>An interactive plot of $P_t(n,N)$ is shown above.</p>

      <p>Given $P_t(n,N)$, we can compute the average number of packs required to obtain all cards via</p>

      <p>$$
        \begin{align}
          \mathbb{E}[t] & = \sum_{t=0}^{\infty} t P_t(n,N) \\
          & = \sum_{k=1}^{N} (-1)^{k+1} {N \choose k} \frac{1}{1-q_k} .
        \end{align}
      $$</p>

      <p>Computing the average for the same couple of examples as used in the table above, we find $\mathbb{E}[t] \approx 63$ for $(N=100$, $n=8)$ and $\mathbb{E}[t] \approx 99.3$ for $(N=250$, $n=15)$.  So we see that the average number of packs required to collect all cards is somewhat larger than the median value, reflecting the asymmetry in $P_t(n,N)$ that can be seen in the plot above (i.e., it has a heavier tail on the large-$t$ side).</p>

    </div>

    <div class="card">

      <h2>What if we have already collected some subset of the cards?</h2>

      <p>Let's now consider a small but relevant extension of the previous results.  Suppose we have a set size of $N$ and a pack size of $n \leq N$, but we have already collected $c \leq N$ of the cards in the set.  How many remaining packs will we need to open in order to have collected all of the cards in the set?</p>

      <p>The same logic we used before also holds here.  We start by determining the probability of missing any one card after opening $t$, and we then determine the CDF by taking the converse.  The primary difference is that we now only need to consider whether one out of $N-c$ cards is missing, rather than one out of $N$ as before.  The modification to the CDF is thus fairly simple,</p>

      <p>$$F_t(n,N,c) = \sum_{k=0}^{N-c} (-1)^{k} {N-c \choose k} q_k^t ,$$</p>

      <p>and the PDF correspondingly so,</p>

      <p>$$P_t(n,N,c) = \sum_{k=0}^{N-c} (-1)^k {N-c \choose k} \left( q_k^t - q_k^{t-1} \right) .$$</p>

    </div>

    <div class="card">

      <h2>How many cards will we have collected after opening a certain number of packs?</h2>

      <p>The distributions $F_t(n,N,c)$ and $P_t(n,N,c)$ describe the number of packs required to have collected all cards, but neither distribution directly provides the number of cards expected after opening $t$ packs.  To obtain this distribution, let's begin by defining a few intermediate quantities:</p>

      <ul>
        <li>We're initially missing $m = N-c$ cards.</li>
        <li>We'll denote the number of new distinct cards we've obtained from among the $m$ initially-missing cards after $t$ packs as $S_t$.</li>
        <li>We'll denote the number of those initially-missing cards that are still unseen after $t$ packs as $R_t = m - S_t$.</li>
        <li>The total number of unique cards collected after $t$ packs will then be $X_t = c + S_t = N - R_t$.</li>
      </ul>

      <p>The other relevant quantity we'll need is $q_k$, which we already know from above describes the probability that opening a single pack avoids a particular set of $k$ cards.</p>

      <p>For a given subset of $r$ missing cards, the probability that none of these cards appear after opening $t$ packs is simply $q_r^t$.  The probability that none of these $r$ cards appear <i>and</i> that all of the remaining $m-r$ cards appear after $t$ packs is analogous to $F_t(n,N,c)$ and is given by</p>

      <p>$$p_t(\text{all but $r$}) = \sum_{j=0}^{m-r} (-1)^j {m-r \choose j} q_{r+j}^t .$$</p>

      <p>There are ${m \choose r}$ different distinct subsets of $r$ missing cards, so the total probability of still missing $r$ cards after opening $t$ packs is then</p>

      <p>$$p_t(R_t = r) = {m \choose r} \sum_{j=0}^{m-r} (-1)^j {m-r \choose j} q_{r+j}^t .$$</p>

      <p>We can see that this expression reduces to $P_t(n,N,c)$ when $r \rightarrow 0$, as it should.</p>

      <p>We can convert $p_t(R_t = r)$ to equivalent probabilities for $S_t$ and $X_t$.  Because $S_t = m - R_t$, we have $s = m - r$ and thus</p>

      <p>$$p_t(S_t = s) = {m \choose s} \sum_{j=0}^{s} (-1)^j {s \choose j} q_{m-s+j}^t .$$</p>

      <p>Similarly, given that $X_t = c + S_t$, we have</p>

      <p>$$p_t(X_t = x) = {N-c \choose x-c} \sum_{k=0}^{x-c} (-1)^k {x-c \choose k} q_{N - x + k}^t ,$$</p>

      <p>which is the distribution we are after.  The above expression describes the probability of having collected $x$ cards after opening $t$ packs.  The expected value of this distribution takes a simple form and is given by</p>

      <p>$$\mathbb{E}[X_t] = N - (N-c) \left( \frac{N-n}{N} \right)^t .$$</p>

      <p>This expectation describes the average number of distinct cards collected after opening $t$ packs.</p>

    </div>

    <div class="card">

      <h2>MTG Arena specifics</h2>

      <p>We now have the tools to take on the MTGA card-collection problem.  Our goal is determine what the optimal strategy ought to be for collecting all of the cards.  Specifically, we'd like to determine how many packs should be opened and how many wildcards (of each rarity) should be used.  For instance, before we have collected any cards in a set, it does not make much sense to start filling out the collection via wildcards; we should clearly start by opening a few packs first.  However, towards the end of the process, when there are very few cards left to collect, using wildcards is a much more efficient way to round out the set.  The goal here is to determine where the turning point is; i.e., a what point point should we should stop collecting cards via opening packs and instead just use wildcards.</p>

      <p>The calculations here are based on the information provided online by Wizards (<a href="https://magic.wizards.com/en/mtgarena/drop-rates">here</a> and <a href="https://magic.wizards.com/en/news/mtg-arena/collecting-pioneer-masters">here</a>).  A summary of some important aspects:</p>

      <ul>
        <li>Each booster pack contains 8 cards, broken down as 5 Commons, 2 Uncommons, and 1 Rare/Mythic.  The relative drop rate of Rares versus Mythics differs from set to set and is detailed on <a href="https://magic.wizards.com/en/mtgarena/drop-rates">the website</a>.  We denote the relative drop rate as $\alpha$, such that one out of every $\alpha$ packs will contain a Mythic rather than a Rare.  The value of $\alpha$ typically falls between 5 and 10, and is equal to 7 for most sets.</li>
        <li>In each pack, one card in each rarity slot has an opportunity to become a wildcard of that rarity.  The rate of wildcard appearance is 1/3 for Commons, 1/5 for Uncommons, and 1/30 for Rares/Mythics.</li>
        <li>Each pack opened progresses the two "Wildcard Tracks" one-sixth of the way around.  There is one wildcard track for Uncommons and one for Rares/Mythics.  Every 6 packs yields an Uncommon wildcard and one of either a Rare or a Mythic wildcard.  The Rare wildcard track loops four times for each one loop of the Mythic wildcard track, such that for every 30 packs you get 5 extra Uncommon wildcards, 4 extra Rare wildcards, and 1 extra Mythic wildcard.</li>
      </ul>

      <p>We ignore Vault rewards in our calculations.</p>

      <p>Given the above information, we can characterize the number of cards of each rarity in a single pack as follows:</p>

      <ul>
        <li>The expected number of Common wildcards in each pack is $w_C = \frac{1}{3}$.</li>
        <li>The expected number of Uncommon wildcards in each pack is $w_U = \frac{1}{5} + \frac{5}{30} = \frac{11}{30}$.</li>
        <li>The expected number of Rare wildcards in each pack is $w_R = \frac{1}{30} \left( 1 - \frac{1}{\alpha} \right) + \frac{4}{30} = \frac{1}{6} \left( 1 - \frac{1}{5 \alpha} \right)$.</li>
        <li>The expected number of Mythic wildcards in each pack is $w_M = \frac{1}{30} \left( \frac{1}{\alpha} \right) + \frac{1}{30} = \frac{1}{30} \left( 1 + \frac{1}{\alpha} \right)$.</li>
        <li>The expected number of non-wildcard Commons in each pack is $n_C = 5 - \frac{1}{3} = \frac{14}{3}$.</li>
        <li>The expected number of non-wildcard Uncommons in each pack is $n_U = 2 - \frac{1}{5} = \frac{9}{5}$.</li>
        <li>The expected number of non-wildcard Rares in each pack is $n_R = \left( 1 - \frac{1}{\alpha} \right) \left( 1 - \frac{1}{30} \right)$.</li>
        <li>The expected number of non-wildcard Mythics in each pack is $n_M = \frac{1}{\alpha} \left( 1 - \frac{1}{30} \right)$.</li>
      </ul>

      <p>The above drop rates are the defaults, but many sets contain some modifications to these default rates; these modifications are detailed in the "Modified drop rates" section below.</p>

    </div>

    <div class="card">

      <h2>The calculator</h2>

      <p>The main goal of the calculator is to identify how many packs it makes sense to open before using wildcards to collect the remaining cards in the set.  The primary inputs to the calculator are the name of the MTGA set being collected (which is selected via a drop-down menu) and the number of cards of each rarity that are already owned.</p>

      <p>The drop rates are used to assign a relative value to wildcards in terms of equivalent number of packs, which is necessary for quantifying when we should switch over from opening packs to using wildcards.  E.g., a Common wildcard is only found once in every 3 packs, so we can assign it a value equal to 3 packs; this means that if we need to open more than 3 packs to obtain the final Common card in a set, then it is worthwhile to simply use a Common wildcard instead of opening the necessary number of packs.  More generally, for assigning wildcard values in terms of equivalent number of packs, we simply use the inverse of the number of wildcards per pack,</p>

      <p>$$v = \frac{1}{w} .$$</p>

      <p>So for a typical value of $\alpha = 7$, we have the following value assignments:</p>

      <ul>
        <li>A Common wildcard has a value of $v_C = 3$ packs.</li>
        <li>An Uncommon wildcard has a value of $v_U = \frac{30}{11} \approx 2.7$ packs.</li>
        <li>A Rare wildcard has a value of $v_R = \frac{30 \alpha}{5 \alpha - 1} \approx 6.2$ packs.</li>
        <li>A Mythic wildcard has a value of $v_M = \frac{30 \alpha}{\alpha + 1} \approx 26.3$ packs.</li>
      </ul>

      <p>Note that the above valuations are not necessarily "correct" because there is no unique notion of "the number of packs that a single wildcard is worth" that will be consistent among all players.  For this reason, the calculator permits users to override the $v$ quantities with their own values.  However, the above valuation assignment is the default, and it is necessary to assign some relative value between wildcards and packs in order to determine when to switch between using one versus the other.</p>

      <p>The calculator starts by computing $\mathbb{E}[X_t]$ for a range of values of $t$.  This calculation is carried out separately for each rarity, resulting in an estimate for the expected number of Commons ($C_t$), Uncommons ($U_t$), Rares ($R_t$), and Mythics ($M_t$) owned as a function of the number of packs opened.  The cost function $J_t$ is then computed assuming that the remaining cards in the set must be crafted from wildcards, resulting in a total cost of</p>

      <p>$$J_t = t + (N_C - \mathbb{E}[C_t]) v_C + (N_U - \mathbb{E}[U_t]) v_U + (N_R - \mathbb{E}[R_t]) v_R + (N_M - \mathbb{E}[M_t]) v_M ,$$</p>

      <p>where $N_C$, $N_U$, $N_R$, and $N_M$ are the total number of Commons, Uncommons, Rares, and Mythics in the set, respectively.  Note that to compute $\mathbb{E}[X_t]$ with noninteger $n$, the calculator uses <a href="https://en.wikipedia.org/wiki/Gamma_function">the Gamma function</a> to analytically continue the factorial function -- i.e., $\Gamma(x) = (x - 1)!$ -- for, e.g., computing binomial coefficients.</p>

      <p>The recommendation provided by the calculator depends on $t_{\text{min}}$, the value of $t$ that minimizes $J_t$.  If $t_{\text{min}} > 0$, then the calculator recommends opening $t_{\text{min}}$ packs prior to using any wildcards.  Otherwise, the calculator recommends just skipping straight to wildcards.</p>

    </div>

    <div class="card">

      <h2>Modified drop rates</h2>

      <p>A number of the sets inject some modifications into what kinds of cards can appear in booster packs, typically to provide space for players to collect cards from an associated bonus sheet.  These modifications are largely detailed on <a href="https://magic.wizards.com/en/mtgarena/drop-rates">this page</a>, and we describe below how they impact the drop rates for the affected sets.</p>

      <h3><i>Strixhaven</i></h3>

      <p>Each <i>Strixhaven</i> booster pack contains only 4 Commons, with one Common instead replaced by a random <i>Mystical Archive</i> card.  The drop rate for non-wildcard Commons is thus adjusted to be $n_C = \frac{11}{3}$ for <i>Strixhaven</i>.</p>

      <p>For the <i>Mystical Archive</i> set, we refer to <a href="https://magic.wizards.com/en/news/feature/collecting-strixhaven-school-mages-2021-03-25">this page</a> on the website.  There are 63 cards in total: 0 Commons, 18 Uncommons, 30 Rares, and 15 Mythics.  Only one card is opened per pack, and it has a 67% chance of being an Uncommon, a 26.4% chance of being a Rare, and a 6.6% chance of being a Mythic.  The per-pack drop rates for this set are thus modified to be:</p>

      <ul>
        <li>The expected number of non-wildcard Commons in each pack is $n_C = 0$.</li>
        <li>The expected number of non-wildcard Uncommons in each pack is $n_U = 0.67$.</li>
        <li>The expected number of non-wildcard Rares in each pack is $n_R = 0.264$.</li>
        <li>The expected number of non-wildcard Mythics in each pack is $n_M = 0.066$.</li>
      </ul>

      <h3><i>The Brothers’ War</i></h3>

      <p>Each <i>The Brothers’ War</i> booster pack contains only 4 Commons, with one Common instead replaced by a random <i>Retro Artifacts</i> card.  The drop rate for non-wildcard Commons is thus adjusted to be $n_C = \frac{11}{3}$ for <i>The Brothers’ War</i>.</p>

      <p>For the <i>Retro Artifacts</i> set, we refer to <a href="https://magic.wizards.com/en/news/feature/whats-inside-the-brothers-war-boosters">this page</a> on the website.  There are 63 cards in total: 0 Commons, 18 Uncommons, 30 Rares, and 15 Mythics.  Only one card is opened per pack, and it has a 66% chance of being an Uncommon, a 27% chance of being a Rare, and a 7% chance of being a Mythic.  The per-pack drop rates for this set are thus modified to be:</p>

      <ul>
        <li>The expected number of non-wildcard Commons in each pack is $n_C = 0$.</li>
        <li>The expected number of non-wildcard Uncommons in each pack is $n_U = 0.66$.</li>
        <li>The expected number of non-wildcard Rares in each pack is $n_R = 0.27$.</li>
        <li>The expected number of non-wildcard Mythics in each pack is $n_M = 0.07$.</li>
      </ul>

      <!-- <h3><i>Phyrexia</i></h3>

      <p>The Rare slot of each <i>Phyrexia: All Will Be One</i> limited booster pack has a 1:60 chance of being replaced by one of four Praetor cards (<a href="https://scryfall.com/card/dmu/107/sheoldred-the-apocalypse">Sheoldred, the Apocalypse</a>, <a href="https://scryfall.com/card/khm/199/vorinclex-monstrous-raider">Vorinclex, Monstrous Raider</a>, <a href="https://scryfall.com/card/snc/129/urabrask-heretic-praetor">Urabrask, Heretic Praetor</a>, or <a href="https://scryfall.com/card/neo/59/jin-gitaxias-progress-tyrant">Jin-Gitaxias, Progress Tyrant</a>).  The drop rates for non-wildcard Rares and Mythics are thus modified to be:</p>

      <ul>
        <li>The expected number of non-wildcard Rares in each pack is $n_R = \frac{59}{60} \left( 1 - \frac{1}{\alpha} \right) \left( 1 - \frac{1}{30} \right)$.</li>
        <li>The expected number of non-wildcard Mythics in each pack is $n_M = \frac{59}{60 \alpha} \left( 1 - \frac{1}{30} \right)$.</li>
      </ul> -->

      <h3><i>Shadows over Innistrad: Remastered</i></h3>

      <p>Each <i>Shadows over Innistrad: Remastered</i> booster pack contains only 4 Commons, with one Common instead replaced by a random <i>Shadows of the Past</i> card.  The drop rate for non-wildcard Commons is thus adjusted to be $n_C = \frac{11}{3}$ for <i>Shadows over Innistrad: Remastered</i>.</p>

      <p>For the <i>Shadows of the Past</i> set, we refer to <a href="https://magic.wizards.com/en/mtgarena/drop-rates">this page</a> on the website.  There are 76 cards in total: 28 Commons, 24 Uncommons, 12 Rares, and 12 Mythics.  Only one card is opened per pack, and it has a 30:63 chance of being a Common, a 30:63 chance of being an Uncommon, a 2:63 chance of being a Rare, and a 1:63 chance of being a Mythic.  The per-pack drop rates for this set are thus modified to be:</p>

      <ul>
        <li>The expected number of non-wildcard Commons in each pack is $n_C = \frac{30}{63}$.</li>
        <li>The expected number of non-wildcard Uncommons in each pack is $n_U = \frac{30}{63}$.</li>
        <li>The expected number of non-wildcard Rares in each pack is $n_R = \frac{2}{63}$.</li>
        <li>The expected number of non-wildcard Mythics in each pack is $n_M = \frac{1}{63}$.</li>
      </ul>

      <h3><i>Wilds of Eldraine</i></h3>

      <p>Each <i>Wilds of Eldraine</i> booster pack contains only 4 Commons, with one Common instead replaced by a random <i>Enchanting Tales</i> card.  The drop rate for non-wildcard Commons is thus adjusted to be $n_C = \frac{11}{3}$ for <i>Wilds of Eldraine</i>.</p>

      <p>For the <i>Enchanting Tales</i> set, we refer to <a href="https://magic.wizards.com/en/news/mtg-arena/mtg-arena-release-notes-wilds-of-eldraine">this page</a> and <a href="https://magic.wizards.com/en/mtgarena/drop-rates">this page</a> on the website.  There are 63 cards in total: 0 Commons, 18 Uncommons, 30 Rares, and 15 Mythics.  Only one card is opened per pack, and it has a 66% chance of being an Uncommon, a 27% chance of being a Rare, and a 7% chance of being a Mythic.  The per-pack drop rates for this set are thus modified to be:</p>

      <ul>
        <li>The expected number of non-wildcard Commons in each pack is $n_C = 0$.</li>
        <li>The expected number of non-wildcard Uncommons in each pack is $n_U = 0.66$.</li>
        <li>The expected number of non-wildcard Rares in each pack is $n_R = 0.27$.</li>
        <li>The expected number of non-wildcard Mythics in each pack is $n_M = 0.07$.</li>
      </ul>

      <h3><i>Outlaws of Thunder Junction</i></h3>

      <p>Each <i>Outlaws of Thunder Junction</i> booster pack contains only 4 Commons, with one Common instead replaced by a random <i>Breaking News</i> card.  The drop rate for non-wildcard Commons is thus adjusted to be $n_C = \frac{11}{3}$ for <i>Outlaws of Thunder Junction</i>.  Additionally, one in every five Mythics from an <i>Outlaws of Thunder Junction</i> pack has a chance to be replaced by a Mythic from <i>The Big Score</i>.  The drop rate for non-wildcard Mythics is thus adjusted to be $n_M = \frac{4}{5\alpha} \left( 1 - \frac{1}{30} \right)$ for <i>Outlaws of Thunder Junction</i>.</p>

      <p>For the <i>Breaking News</i> set, we refer to <a href="https://magic.wizards.com/en/news/feature/collecting-outlaws-of-thunder-junction">this page</a> and <a href="https://magic.wizards.com/en/mtgarena/drop-rates">this page</a> on the website.  There are 65 cards in total: 0 Commons, 20 Uncommons, 30 Rares, and 15 Mythics.  Only one card is opened per pack, and it has a 66% chance of being an Uncommon, a 27% chance of being a Rare, and a 7% chance of being a Mythic.  The per-pack drop rates for this set are thus modified to be:</p>

      <ul>
        <li>The expected number of non-wildcard Commons in each pack is $n_C = 0$.</li>
        <li>The expected number of non-wildcard Uncommons in each pack is $n_U = 0.66$.</li>
        <li>The expected number of non-wildcard Rares in each pack is $n_R = 0.27$.</li>
        <li>The expected number of non-wildcard Mythics in each pack is $n_M = 0.07$.</li>
      </ul>

      <p>For the <i>The Big Score</i> set, we refer to <a href="https://magic.wizards.com/en/news/feature/collecting-outlaws-of-thunder-junction">this page</a> and <a href="https://magic.wizards.com/en/mtgarena/drop-rates">this page</a> on the website.  There are 30 cards in total, all Mythics.  Only up to one card is opened per pack, at a rate that is 20% that of the normal Mythic drop rate.  The per-pack drop rates for this set are thus modified to be:</p>

      <ul>
        <li>The expected number of non-wildcard Commons in each pack is $n_C = 0$.</li>
        <li>The expected number of non-wildcard Uncommons in each pack is $n_U = 0$.</li>
        <li>The expected number of non-wildcard Rares in each pack is $n_R = 0$.</li>
        <li>The expected number of non-wildcard Mythics in each pack is $n_M = \frac{1}{5\alpha} \left( 1 - \frac{1}{30} \right)$.</li>
      </ul>

      <h3><i>Modern Horizons 3</i></h3>

      <p>Each <i>Modern Horizons 3</i> booster pack contains only 4 Commons, with one Common instead replaced by a random "new-to-Modern" card.  These cards are actually still members of the <i>Modern Horizons 3</i> set, and there are 42 of them: 20 Uncommons, 18 Rares, and 4 Mythics, dropping at relative rates of $\frac{40}{51}$, $\frac{10}{51}$, and $\frac{1}{51}$, respectively.  Additionally, one Common in each <i>Modern Horizons 3</i> pack has a 1:64 chance of being replaced by a card from the "Special Guest" list.  The per-pack drop rates for <i>Modern Horizons 3</i> are thus modified to be:</p>

      <ul>
        <li>The expected number of non-wildcard Commons in each pack is $n_C = \frac{11}{3} - \frac{1}{64} \approx 3.65$.</li>
        <li>The expected number of non-wildcard Uncommons in each pack is $n_U = \frac{9}{5} + \frac{40}{51} \approx 2.58$.</li>
        <li>The expected number of non-wildcard Rares in each pack is $n_R = \left( 1 - \frac{1}{\alpha} \right) \left( 1 - \frac{1}{30} \right) + \frac{10}{51} \approx 1.02$.</li>
        <li>The expected number of non-wildcard Mythics in each pack is $n_M = \frac{1}{\alpha} \left( 1 - \frac{1}{30} \right) + \frac{1}{51} \approx 0.16$.</li>
      </ul>

      <h3><i>Aetherdrift</i></h3>

      <p>One Common in each <i>Aetherdrift</i> booster pack has a 1:64 chance of being replaced by a card from the "Special Guest" list.  The drop rate for non-wildcard Commons is thus adjusted to be $n_C = \frac{14}{3} - \frac{1}{64} \approx 4.65$ for <i>Aetherdrift</i>.</p>

      <h3><i>Tarkir: Dragonstorm</i></h3>

      <p>One Common in each <i>Tarkir: Dragonstorm</i> booster pack has a 1:60 chance of being replaced by a card from the "Special Guest" list.  The drop rate for non-wildcard Commons is thus adjusted to be $n_C = \frac{14}{3} - \frac{1}{60} = 4.65$ for <i>Tarkir: Dragonstorm</i>.</p>

      <h3><i>FINAL FANTASY</i></h3>

      <p>One Common in each <i>FINAL FANTASY</i> booster pack has a 1:3 chance of being replaced by a random <i>FINAL FANTASY Through the Ages</i> card.  The drop rate for non-wildcard Commons is thus adjusted to be $n_C = \frac{13}{3}$ for <i>FINAL FANTASY</i>.</p>

      <p>For the <i>FINAL FANTASY Through the Ages</i> set, we refer to <a href="https://magic.wizards.com/en/news/feature/collecting-final-fantasy">this page</a> and <a href="https://magic.wizards.com/en/mtgarena/drop-rates">this page</a> on the website.  There are 64 cards in total: 0 Commons, 17 Uncommons, 32 Rares, and 15 Mythics.  Only up to one card is opened per pack, and it has a 54:74 chance of being an Uncommon, a 15:74 chance of being a Rare, and a 5:74 chance of being a Mythic.  The per-pack drop rates for this set are thus modified to be:</p>

      <ul>
        <li>The expected number of non-wildcard Commons in each pack is $n_C = 0$.</li>
        <li>The expected number of non-wildcard Uncommons in each pack is $n_U = \left( \frac{54}{74} \right) \left( \frac{1}{3} \right) \approx 0.243$.</li>
        <li>The expected number of non-wildcard Rares in each pack is $n_R = \left( \frac{15}{74} \right) \left( \frac{1}{3} \right) = 0.068$.</li>
        <li>The expected number of non-wildcard Mythics in each pack is $n_M = \left( \frac{5}{74} \right) \left( \frac{1}{3} \right) = 0.023$.</li>
      </ul>

      <h3><i>Edge of Eternities</i></h3>

      <p>One Common in each <i>Edge of Eternities</i> booster pack has a 1:55 chance of being replaced by a card from the "Special Guest" list.  Additionally, any <i>Edge of Eternities</i> pack has a 1:6.7 chance of having a single card replaced by a Rare from <i>Stellar Sights</i>, and that Rare then has a 1:5 chance of being upgraded to a Mythic from <i>Stellar Sights</i>.  The per-pack drop rates for <i>Edge of Eternities</i> are thus modified to be:</p>

      <ul>
        <li>The expected number of non-wildcard Commons in each pack is $n_C = \frac{14}{3} - \frac{1}{55} - \left( \frac{5}{8} \right) \left( \frac{1}{6.7} \right) \approx 4.56$.</li>
        <li>The expected number of non-wildcard Uncommons in each pack is $n_U = \frac{9}{5} - \left( \frac{2}{8} \right) \left( \frac{1}{6.7} \right) \approx 1.76$.</li>
        <li>The expected number of non-wildcard Rares in each pack is $n_R = \left( 1 - \frac{1}{\alpha} - \left( \frac{1}{8} \right) \left( \frac{1}{6.7} \right) \right) \left( 1 - \frac{1}{30} \right) \approx 0.81$.</li>
        <li>The expected number of non-wildcard Mythics in each pack is $n_M = \left( \frac{1}{\alpha} - \left( \frac{1}{8} \right) \left( \frac{1}{6.7} \right) \right) \left( 1 - \frac{1}{30} \right) \approx 0.12$.</li>
      </ul>

      <p>For the <i>Stellar Sights</i> set, we refer to <a href="https://magic.wizards.com/en/news/feature/collecting-edge-of-eternities">this page</a> and <a href="https://magic.wizards.com/en/mtgarena/drop-rates">this page</a> on the website.  There are 45 cards in total: 0 Commons, 0 Uncommons, 30 Rares, and 15 Mythics.  Only up to one card is opened per pack, and a Rare has a 1:5 chance of being upgraded to a Mythic.  The per-pack drop rates for <i>Stellar Sights</i> are thus modified to be:</p>

      <ul>
        <li>The expected number of non-wildcard Commons in each pack is $n_C = 0$.</li>
        <li>The expected number of non-wildcard Uncommons in each pack is $n_U = 0$.</li>
        <li>The expected number of non-wildcard Rares in each pack is $n_R = \left( \frac{1}{6.7} \right) \left( \frac{4}{5} \right) \approx 0.12$.</li>
        <li>The expected number of non-wildcard Mythics in each pack is $n_M = \left( \frac{1}{6.7} \right) \left( \frac{1}{5} \right) \approx 0.03$.</li>
      </ul>

      <h3><i>Through the Omenpaths</i></h3>

      <p>Each <i>Through the Omenpaths</i> booster pack has a 1:64 chance of having one Common replaced by a random <i>Omenpath Bonus Sheet</i> card.  The drop rate for non-wildcard Commons is thus adjusted to be $n_C = \frac{14}{3} - \frac{1}{64} \approx 4.65$ for <i>Through the Omenpaths</i>.</p>

      <p>For the <i>Omenpath Bonus Sheet</i> set, there are 40 cards in total: 5 Commons, 7 Uncommons, 18 Rares, and 10 Mythics.  Only up to one card is opened per pack.  I have not been able to find the relative drop probability listed by Wizards anywhere, so I assume a nominal rate of 70:14:7:1 for Commons:Uncommons:Rares:Mythics.  The per-pack drop rates for this set are thus modified to be:</p>

      <ul>
        <li>The expected number of non-wildcard Commons in each pack is $n_C = \left( \frac{1}{64} \right) \left( \frac{70}{92} \right) \approx 0.0119$.</li>
        <li>The expected number of non-wildcard Uncommons in each pack is $n_U = \left( \frac{1}{64} \right) \left( \frac{14}{92} \right) \approx 0.0024$.</li>
        <li>The expected number of non-wildcard Rares in each pack is $n_R = \left( \frac{1}{64} \right) \left( \frac{7}{92} \right) \approx 0.0012$.</li>
        <li>The expected number of non-wildcard Mythics in each pack is $n_M = \left( \frac{1}{64} \right) \left( \frac{1}{92} \right) \approx 0.0002$.</li>
      </ul>

      <h3><i>Avatar: The Last Airbender</i></h3>

      <p>Each <i>Avatar: The Last Airbender</i> booster pack has a 1:25 chance of having one Common replaced by a random <i>Avatar: The Last Airbender Extra</i> card.  The drop rate for non-wildcard Commons is thus adjusted to be $n_C = \frac{14}{3} - \frac{1}{25} \approx 4.63$ for <i>Avatar: The Last Airbender</i>.</p>

      <p>For the <i>Avatar: The Last Airbender Extra</i> set, there are 237 cards in total: 53 Commons, 46 Uncommons, 66 Rares, and 72 Mythics.  Only up to one card is opened per pack.  I have not been able to find the relative drop probability listed by Wizards anywhere, so I assume a nominal rate of 70:14:7:1 for Commons:Uncommons:Rares:Mythics.  The per-pack drop rates for this set are thus modified to be:</p>

      <ul>
        <li>The expected number of non-wildcard Commons in each pack is $n_C = \left( \frac{1}{25} \right) \left( \frac{70}{92} \right) \approx 0.0304$.</li>
        <li>The expected number of non-wildcard Uncommons in each pack is $n_U = \left( \frac{1}{25} \right) \left( \frac{14}{92} \right) \approx 0.0061$.</li>
        <li>The expected number of non-wildcard Rares in each pack is $n_R = \left( \frac{1}{25} \right) \left( \frac{7}{92} \right) \approx 0.0030$.</li>
        <li>The expected number of non-wildcard Mythics in each pack is $n_M = \left( \frac{1}{25} \right) \left( \frac{1}{92} \right) \approx 0.0004$.</li>
      </ul>

    </div>

  </div>

  <script defer src="https://cdn.jsdelivr.net/npm/plotly.js-dist-min/plotly.min.js"></script>
  <script type="module" src="assets/js/ft_plot.js"></script>
  <script type="module">
    import { setActiveNav } from './assets/js/common.js';
    setActiveNav();
  </script>
</body>
</html>
